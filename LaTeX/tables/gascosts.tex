% !TEX root = ../main.tex

%~\textbf{Alice:} can call loadFunds more than once. loadCiphertexts  x 4

%~\textbf{Bob:} can call loadFunds more than once. loadCiphertexts x 4

%~\textbf{Trustee1:} is also the manager. Trustee1 calls  
%\begin{enumerate}
%	\item loadOutputs  x 2
%	\item  createRow1  x 4
%\end{enumerate}
%at the beginning of the protocol. 
%\newline
%
%The following is repeated for each PET (8 times): 
%\begin{enumerate}
%	\item PET\_subtract
%	\item DHProve\_Trustee1Pf\_Rand
%	\item DHProve\_Trustee1Pf\_PartialDec
%	 \item FullDecryption
%\end{enumerate}
%
%After all PETs are run, Trustee1 has to run the following:
%\begin{enumerate}
%	\item matchingRow
%	\item matchingValue
%	\item createFinalDecryption
%	\item loadFinalCiphertext
%	\item DHProve\_Trustee1Pf\_PartialDec
%	\item FullDecryption
%\end{enumerate}
%
%~\textbf{Trustee2:} 
%
%The following is repeated for each PET (8 times): 
%\begin{enumerate}
%	\item DHProve\_Trustee2Pf\_Rand 
%	\item DHProve\_Trustee2Pf\_PartialDec
%\end{enumerate}
%and calls DHProve\_Trustee2Pf\_PartialDec once for the final decryption.


\begin{table}[t]
		\centering
	\begin{tabular}{|l|l|r|r|}
		\hline
		~\textbf{Contract} & ~\textbf{Function } & ~\textbf{Gas}  & ~\textbf{Gas Cost (\$)}  \\ \hline
			ec.sol	& Deploy Contract &595,517 & 31.94 \\ \hline

		\multirow{8}{*}{}  
		& Deploy Contract &6,091,398 & 326.75 \\ \cline{2-4} 
		& A\&B: Load Funds & 28,040  &1.50  \\ \cline{2-4} 
	%	& Check Balances &  30,359& 1.63 \\  \cline{2-4} 
		& T1*: Load Outputs&  300,798 & 16.13 \\  \cline{2-4} 
		& T1*: Create Row & 8,741,453 & 468.90 \\  \cline{2-4}
		Mixmatch.sol 	& T1*: Find Matching Row & 37,547 &2.01  \\  \cline{2-4}
		(Absentia DApp)& T1*: Find Matching Value &  40,868&2.19 \\  \cline{2-4}
		& T1*:  Create Final Decryption&  4,430,611& 237.66 \\  \cline{2-4}
		& A\&B: Withdraw Excess Funds &  41,110& 2.21 \\  \cline{2-4}
		&  A\&B:  Withdraw Funds&  39,221& 2.10 \\   \hline
		\multirow{8}{*}{} 
		& Deploy Contract & 4,681,858&251.14 \\ \cline{2-4} 
		&   A\&B or T1*: Load Ciphertexts & 304,668 & 16.34 \\  \cline{2-4}
		& T1*: Subtraction & 242,131 & 12.99\\  \cline{2-4}
		& T1*: Randomization ZKP& 815,340 &  43.74\\  \cline{2-4}
		PET.sol	&  T2: Randomization ZKP& 393,561 &21.11  \\  \cline{2-4}
		(PET Sub-DApp) & T1: Partial Dec ZKP& 364,298 & 19.54\\  \cline{2-4}
		& T2: Partial Dec ZKP & 363,612 & 19.50 \\  \cline{2-4}
		& T1*: Full Decryption  &  107,086& 5.74 \\  \cline{2-4}
		& T1*:  Load Final Ciphertexts& 173,945 & 9.33\\ \hline
		\cline{1-4}
	\end{tabular}
	\caption{Gas costs per function and who runs the function: Alice (A), Bob (B), Trustee 1 as the leader (T1*), or Trustee 2 (T2). Note that many functions are run more than once.}
	%0.0000536405320861138 USD
	 \label{tab:gascost}
\end{table}